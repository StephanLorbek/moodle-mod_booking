define("mod_booking/prepageFooter",["exports","mod_booking/bookit","local_wunderbyte_table/reload"],(function(_exports,_bookit,_reload){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initFooterButtons=function(optionid,userid){!async function(optionid){console.log("initBookingButton");let modal=document.querySelector("div.modal.show[id^="+SELECTORS_MODALID+optionid+"]");if(!modal)return;modal.addEventListener("click",(e=>{console.log("click on modal",e.target);let button=e.target;if(button){const parentElement=e.target.closest(SELECTORS_BOOKITBUTTON);if(button=e.target.closest(".btn"),console.log(button,parentElement),parentElement&&button){if(console.log("initBookingButton click"),"noforward"==parentElement.dataset.action)return;setTimeout((()=>{(0,_bookit.continueToNextPage)(optionid)}),1500)}}}))}(optionid);const elements=document.querySelectorAll("[id^="+SELECTORS_MODALID+optionid+"] "+SELECTORS_INMODALFOOTER+" a");console.log("elements",elements),elements.forEach((element=>{element&&!element.dataset.initialized&&(element.dataset.initialized=!0,element.addEventListener("click",(()=>{if(element.classList.contains("hidden"))return;if("true"==element.dataset.blocked)return;switch(element.dataset.action){case"back":(0,_bookit.backToPreviousPage)(optionid,userid);break;case"continue":(0,_bookit.continueToNextPage)(optionid,userid);break;case"checkout":closeModal(optionid),window.location.href=element.dataset.href;break;case"closemodal":closeModal(optionid)}})))}))};
/**
   * @module     mod_booking/prepageFooter
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
var SELECTORS_MODALID="sbPrePageModal_",SELECTORS_INMODALFOOTER=" div.prepage-booking-footer",SELECTORS_BOOKITBUTTON="div.booking-button-area",SELECTORS_STATICBACKDROP="div.modal-backdrop";function closeModal(optionid){const backdrop=document.querySelector(SELECTORS_STATICBACKDROP),modal=document.querySelector("div.modal.show[id^="+SELECTORS_MODALID+optionid+"]");modal&&modal.classList.remove("show"),backdrop&&(backdrop.remove(),(0,_reload.reloadAllTables)())}}));

//# sourceMappingURL=prepageFooter.min.js.map