{"version":3,"sources":["../src/bookinginstancetemplateselect.js"],"names":["define","$","ajax","init","change","val","call","methodname","args","id","done","data","obj","parseJSON","template","name","eventtype","html","intro","duration","points","organizatorname","pollurl","pollurlteachers","whichview","defaultoptionsort","enablepresence","templateid","showdescriptionmode","showlistoncoursepage","coursepageshortinfo","sendmail","copymail","sendmailtobooker","daystonotify","daystonotify2","daystonotifyteachers","mailtemplatessource","bookedtext","waitingtext","notifyemail","notifyemailteachers","statuschangetext","userleave","deletedtext","bookingchangedtext","pollurltext","pollurlteacherstext","activitycompletiontext","btncacname","lblteachname","lblsputtname","btnbooknowname","btncancelname","lblbooking","lbllocation","lblinstitution","lblname","lblsurname","booktootherbooking","lblacceptingfrom","lblnumofusers","bookingpolicy","cancancelbook","allowupdate","allowupdatedays","autoenrol","addtogroup","maxperuser","showinapi","numgenerator","paginationnum","banusernames","showhelpfullnavigationlinks","completionmodule","comments","ratings","removeuseronunenrol","JSON","parse","categoryid","beforecompletedtext","aftercompletedtext","beforebookedtext","conectedbooking","teacherroleid","assessed"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AJAX helper for the inline editing a value.\n *\n * This script is automatically included from template core/inplace_editable\n * It registers a click-listener on [data-inplaceeditablelink] link (the \"inplace edit\" icon),\n * then replaces the displayed value with an input field. On \"Enter\" it sends a request\n * to web service core_update_inplace_editable, which invokes the specified callback.\n * Any exception thrown by the web service (or callback) is displayed as an error popup.\n *\n * @module     mod_booking/bookinginstancetemplateselect\n * @package    mod_booking\n * @copyright  2019 Andraž Prinčič\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      4.5\n */\n\ndefine(['jquery', 'core/ajax'], function($, ajax) {\n\n    return {\n        init: function() {\n\n            // Put whatever you like here. $ is available\n            // to you as normal.\n            $(\"#id_instancetemplateid\").change(function() {\n                if ($(\"#id_instancetemplateid\").val() != '') {\n                    ajax\n                    .call([{\n                        methodname: 'mod_booking_instancetemplate',\n                        args: {\n                            id: $(\"#id_instancetemplateid\").val()\n                        },\n                        done: function(data) {\n                            var obj = $.parseJSON(data.template);\n\n                            // General\n                            $(\"#id_name\").val(obj.name);\n\n                            // TODO: eventtype does not yet work correctly.\n                            $(\"#id_eventtype\").val(obj.eventtype);\n\n                            $(\"#id_introeditoreditable\").html(obj.intro);\n                            $('#id_duration').val(obj.duration);\n                            $('#id_points').val(obj.points);\n                            $('#id_organizatorname').val(obj.organizatorname);\n                            $('#id_pollurl').val(obj.pollurl);\n                            $('#id_pollurlteachers').val(obj.pollurlteachers);\n                            // TODO: attachment - is this even possible?\n                            // TODO: Views to show in the booking options overview.\n                            $('#id_whichview').val(obj.whichview);\n                            $('#id_defaultoptionsort').val(obj.defaultoptionsort);\n                            $('#id_enablepresence').val(obj.enablepresence);\n                            $('#id_templateid').val(obj.templateid);\n                            $('#id_showdescriptionmode').val(obj.showdescriptionmode);\n                            $('#id_showlistoncoursepage').val(obj.showlistoncoursepage);\n                            $('#id_coursepageshortinfo').val(obj.coursepageshortinfo);\n                            // Known issue: coursepageshortinfo won't be unhidden when filled from template.\n\n                            // Confirmation e-mail settings\n                            $('#id_sendmail').val(obj.sendmail);\n                            $('#id_copymail').val(obj.copymail);\n                            $('#id_sendmailtobooker').val(obj.sendmailtobooker);\n                            $('#id_daystonotify').val(obj.daystonotify);\n                            $('#id_daystonotify2').val(obj.daystonotify2);\n                            $('#id_daystonotifyteachers').val(obj.daystonotifyteachers);\n                            // TODO: bookingmanager\n                            $('#id_mailtemplatessource').val(obj.mailtemplatessource);\n                            $('#id_bookedtexteditable').html(obj.bookedtext);\n                            $('#id_waitingtexteditable').html(obj.waitingtext);\n                            $('#id_notifyemaileditable').html(obj.notifyemail);\n                            $('#id_notifyemailteacherseditable').html(obj.notifyemailteachers);\n                            $('#id_statuschangetexteditable').html(obj.statuschangetext);\n                            $('#id_userleaveeditable').html(obj.userleave);\n                            $('#id_deletedtexteditable').html(obj.deletedtext);\n                            $('#id_bookingchangedtexteditable').html(obj.bookingchangedtext);\n                            $('#id_pollurltexteditable').html(obj.pollurltext);\n                            $('#id_pollurlteacherstexteditable').html(obj.pollurlteacherstext);\n                            $('#id_activitycompletiontexteditable').html(obj.activitycompletiontext);\n\n                            // Custom labels\n                            $('#id_btncacname').val(obj.btncacname);\n                            $('#id_lblteachname').val(obj.lblteachname);\n                            $('#id_lblsputtname').val(obj.lblsputtname);\n                            $('#id_btnbooknowname').val(obj.btnbooknowname);\n                            $('#id_btncancelname').val(obj.btncancelname);\n                            $('#id_lblbooking').val(obj.lblbooking);\n                            $('#id_lbllocation').val(obj.lbllocation);\n                            $('#id_lblinstitution').val(obj.lblinstitution);\n                            $('#id_lblname').val(obj.lblname);\n                            $('#id_lblsurname').val(obj.lblsurname);\n                            $('#id_booktootherbooking').val(obj.booktootherbooking);\n                            $('#id_lblacceptingfrom').val(obj.lblacceptingfrom);\n                            $('#id_lblnumofusers').val(obj.lblnumofusers);\n\n                            // Miscellaneous settings\n                            $('#id_bookingpolicyeditable').html(obj.bookingpolicy);\n                            $('#id_cancancelbook').val(obj.cancancelbook);\n                            $('#id_allowupdate').val(obj.allowupdate);\n                            $('#id_allowupdatedays').val(obj.allowupdatedays);\n                            $('#id_autoenrol').val(obj.autoenrol);\n                            $('#id_addtogroup').val(obj.addtogroup);\n                            $('#id_maxperuser').val(obj.maxperuser);\n                            $('#id_showinapi').val(obj.showinapi);\n                            $('#id_numgenerator').val(obj.numgenerator);\n                            $('#id_paginationnum').val(obj.paginationnum);\n                            $('#id_banusernames').val(obj.banusernames);\n                            $('#id_showhelpfullnavigationlinks').val(obj.showhelpfullnavigationlinks);\n                            $('#id_completionmodule').val(obj.completionmodule);\n                            $('#id_comments').val(obj.comments);\n                            $('#id_ratings').val(obj.ratings);\n                            $('#id_removeuseronunenrol').val(obj.removeuseronunenrol);\n\n                            // Category\n                            $(\"#id_categoryid\").val(JSON.parse(\"[\" + obj.categoryid + \"]\"));\n\n                            // TODO: Fields to display in different contexts\n\n                            // Booking option text depending on booking status\n                            $('#id_beforecompletedtexteditable').html(obj.beforecompletedtext);\n                            $('#id_aftercompletedtexteditable').html(obj.aftercompletedtext);\n                            $('#id_beforebookedtexteditable').html(obj.beforebookedtext);\n\n                            // TODO: Sign-In Sheet Configuration\n                            // $(\"#id_signinsheetfields\").val(JSON.parse(\"[\" + obj.signinsheetfields + \"]\")).change();\n\n                            // TO-DO :Create backup!\n                            // TO-DO: Fields still to add:\n                            // - assesstimefinish\n                            // - assesstimestart\n                            // - course\n                            // - enablecompletion\n                            // - optionsfields\n                            // - reportfields\n                            // - responsesfields\n                            // - scale\n                            // - signinsheetfields\n                            // - timeclose\n                            // - timemodified\n                            // - timeopen\n\n                            // Connected booking\n                            $('#id_conectedbooking').val(obj.conectedbooking);\n\n                            // Teachers\n                            $('#id_teacherroleid').val(obj.teacherroleid);\n\n                            // TODO: Custom report templates\n                            // TODO: Automatic booking option creation\n\n                            // Ratings\n                            $('#id_assessed').val(obj.assessed);\n\n                            // TODO: Common module settings\n                            // TODO: Restrict access (possible?)\n                            // TODO: Activity completion\n                            // TODO: Competencies\n                        }\n                    }], true);\n                }\n            });\n        }\n    };\n});\n"],"file":"bookinginstancetemplateselect.min.js"}